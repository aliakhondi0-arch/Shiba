<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Earn Shiba by Watching Ads</title>
  <meta name='admaven-placement' content='Bqja4rHC6'>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background-image: url('https://wallpaperaccess.com/full/3601922.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      text-align: center;
      color: #fff;
      overflow: hidden;
    }

    @keyframes glow {
      0% { box-shadow: 0 0 10px #00f; }
      50% { box-shadow: 0 0 20px #f0f; }
      100% { box-shadow: 0 0 10px #00f; }
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      50% { transform: translateX(2px); }
      75% { transform: translateX(-2px); }
      100% { transform: translateX(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .reward-banner {
      position: fixed;
      top: 60px;
      left: 0;
      right: 0;
      margin: 0 auto;
      background: linear-gradient(90deg, #00f, #f0f);
      color: #fff;
      padding: 12px 24px;
      border-radius: 14px;
      font-weight: bold;
      font-size: 15px;
      animation: glow 2s infinite, shake 1.5s infinite;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      max-width: 90%;
      width: fit-content;
    }

    .wallet-btn, .dashboard-btn, .referral-btn {
      position: fixed;
      top: 12px;
      background-color: white;
      border: 2px solid #777;
      padding: 6px;
      border-radius: 8px;
      cursor: pointer;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 1001;
      transition: transform 0.2s ease;
    }

    .wallet-btn:hover, .dashboard-btn:hover, .referral-btn:hover {
      transform: scale(1.1);
    }

    .wallet-btn { right: 12px; }
    .dashboard-btn { left: 12px; }
    .referral-btn { left: 50%; transform: translateX(-50%); }

    .wallet-btn img, .dashboard-btn img, .referral-btn img {
      height: 18px;
      width: 18px;
    }

    .container {
      max-width: 500px;
      margin: 120px auto 40px auto;
      padding: 20px 16px 40px 16px;
      background-color: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      position: relative;
      z-index: 1;
      height: calc(100vh - 160px);
      overflow-y: auto;
    }

    h1 {
      color: #fff;
      font-size: 22px;
      margin-bottom: 5px;
    }

    .shiba-logo {
      height: 36px;
      width: 36px;
      vertical-align: middle;
      margin-right: 8px;
    }

    .subtitle {
      color: #fff;
      font-size: 14px;
      margin-bottom: 20px;
      opacity: 0.9;
      line-height: 1.4;
    }

    button {
      color: white;
      border: none;
      padding: 12px 14px;
      font-size: 14px;
      border-radius: 8px;
      cursor: pointer;
      margin: 8px 0 4px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      transition: transform 0.2s ease, opacity 0.2s ease;
      font-weight: bold;
    }

    button:hover {
      transform: scale(1.03);
    }

    button:active {
      transform: scale(0.98);
    }

    .video-btn { background-color: #e74c3c; }
    .banner-btn { background-color: #27ae60; }
    .click-btn { background-color: #f39c12; }
    .close-btn { background-color: #0077cc; }
    .withdraw-btn { background-color: #9b59b6; }

    .section { 
      margin-top: 25px;
      animation: fadeIn 0.5s ease;
    }

    .support {
      margin-top: 30px;
      font-size: 12px;
      color: #fff;
    }

    .wallet-modal, .dashboard-modal, .referral-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .wallet-content {
      background-color: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 12px;
      width: 280px;
      text-align: left;
      color: #fff;
      animation: fadeIn 0.3s ease;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .wallet-content input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #777;
      background-color: rgba(255,255,255,0.1);
      color: #fff;
      font-size: 14px;
      box-sizing: border-box;
    }

    .wallet-content input:focus {
      outline: none;
      border-color: #0077cc;
    }

    .wallet-content button {
      width: 100%;
      margin-top: 8px;
    }

    .progress-container {
      margin: 15px 0;
      background-color: rgba(255,255,255,0.1);
      border-radius: 10px;
      height: 12px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #00f, #f0f);
      border-radius: 10px;
      transition: width 0.5s ease;
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: rgba(0,0,0,0.8);
      color: white;
      padding: 15px 20px;
      border-radius: 8px;
      z-index: 1002;
      animation: fadeIn 0.3s ease;
      display: none;
    }

    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
      gap: 10px;
    }

    .stat-box {
      background: linear-gradient(135deg, rgba(0, 119, 204, 0.7), rgba(240, 0, 240, 0.7));
      padding: 15px;
      border-radius: 12px;
      flex: 1;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .stat-value {
      font-size: 20px;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }

    .stat-label {
      font-size: 12px;
      opacity: 0.9;
      margin-top: 5px;
    }

    .btn-icon {
      width: 18px;
      height: 18px;
    }

    .last-update {
      font-size: 10px;
      opacity: 0.7;
      margin-top: 5px;
    }

    .progress-text {
      font-size: 11px;
      margin-bottom: 15px;
      opacity: 0.8;
    }

    h2 {
      font-size: 16px;
      margin-bottom: 12px;
      color: #fff;
    }

    .loading {
      opacity: 0.7;
      pointer-events: none;
    }

    .ad-timer {
      font-size: 12px;
      color: #ffeb3b;
      margin-top: 5px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="reward-banner">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/money-bag.png" alt="Money" style="width:18px; height:18px;">
    <span>Watch <strong>1000 ads</strong> and earn <strong>50,000 Shiba!</strong></span>
  </div>

  <div class="notification" id="notification"></div>

  <button class="dashboard-btn" onclick="openDashboard()">
    <img src="https://img.icons8.com/ios-filled/50/000000/combo-chart.png" alt="Dashboard Icon">
  </button>

  <button class="wallet-btn" onclick="openWallet()">
    <img src="https://img.icons8.com/ios-filled/50/000000/wallet.png" alt="Wallet Icon">
  </button>

  <button class="referral-btn" onclick="openReferral()">
    <img src="https://img.icons8.com/ios-filled/50/FF6B6B/groups.png" alt="Referral Icon">
  </button>

  <div class="container">
    <h1>
      <img src="https://upload.wikimedia.org/wikipedia/en/5/53/Shiba_Inu_coin_logo.png" alt="Shiba Logo" class="shiba-logo">
      Earn Shiba by Watching Ads
    </h1>
    
    <div class="subtitle">Watch ads, earn Shiba! Complete tasks and refer friends to earn more.</div>

    <div class="stats">
      <div class="stat-box">
        <div class="stat-value" id="currentBalance">208,890</div>
        <div class="stat-label">Shiba</div>
        <div class="last-update">Updated just now</div>
      </div>
      <div class="stat-box">
        <div class="stat-value" id="currentAds">96</div>
        <div class="stat-label">Ads Watched</div>
        <div class="last-update">20 mins ago</div>
      </div>
    </div>

    <div class="progress-container">
      <div class="progress-bar" id="progressBar" style="width: 9.6%"></div>
    </div>
    <div class="progress-text" id="progressText">96/1000 ads watched</div>

    <div class="section">
      <h2>Available Ads</h2>
      
      <button class="video-btn" onclick="showAd('video', 100)">
        <img src="https://img.icons8.com/ios-filled/50/ffffff/play.png" class="btn-icon" alt="Video">
        Video Ad (Earn 100 Shiba)
      </button>
      <div class="ad-timer" id="videoTimer"></div>

      <button class="banner-btn" onclick="showAd('banner', 80)">
        <img src="https://img.icons8.com/ios-filled/50/ffffff/survey.png" class="btn-icon" alt="Survey">
        Survey Ad (Earn 80 Shiba)
      </button>
      <div class="ad-timer" id="bannerTimer"></div>

      <button class="click-btn" onclick="showAd('click', 50)">
        <img src="https://img.icons8.com/ios-filled/50/ffffff/cursor.png" class="btn-icon" alt="Click">
        Click Ad (Earn 50 Shiba)
      </button>
      <div class="ad-timer" id="clickTimer"></div>
    </div>

    <div class="support">
      For support: 
      <a href="https://t.me/whichadtoearn" target="_blank" style="display: inline-flex; align-items: center; gap: 5px; text-decoration: none; color: #fff;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" style="height:16px; width:16px;">
        Contact us on Telegram
      </a>
    </div>
  </div>

  <!-- Ù…ÙˆØ¯Ø§Ù„ ØªØ¨Ù„ÛŒØºØ§Øª -->
  <div class="wallet-modal" id="adModal">
    <div class="wallet-content">
      <h2>Watch Ad</h2>
      <p id="adMessage">Please watch the ad for 30 seconds to earn Shiba</p>
      <div class="progress-container">
        <div class="progress-bar" id="adProgressBar" style="width: 0%"></div>
      </div>
      <div class="progress-text" id="adTimer">30 seconds remaining</div>
      <button class="close-btn" onclick="closeAd()">Cancel</button>
    </div>
  </div>

  <div class="wallet-modal" id="walletModal">
    <div class="wallet-content">
      <h2>Wallet</h2>
      <p>Shiba Balance: <span id="shibaBalance">0</span></p>
      <input type="text" id="walletInput" placeholder="Enter wallet address">
      <input type="email" id="emailInput" placeholder="Enter your email">
      <button class="withdraw-btn" id="withdrawButton" onclick="withdraw()">Withdraw (Min: 200,000 Shiba)</button>
      <button class="close-btn" onclick="closeWallet()">Close</button>
    </div>
  </div>

  <div class="dashboard-modal" id="dashboardModal">
    <div class="wallet-content">
      <h2>Dashboard</h2>
      <p>Shiba Balance: <span id="dashBalance">0</span></p>
      <p>Ads Watched: <span id="dashAds">0</span></p>
      <p>Referrals: <span id="referralCount">0</span></p>
      <button class="close-btn" onclick="closeDashboard()">Close</button>
    </div>
  </div>

  <div class="referral-modal" id="referralModal">
    <div class="wallet-content">
      <h2>Referral Program</h2>
      <p>Invite friends and earn <strong>500 Shiba</strong> per referral!</p>
      <p>Your referral code: <strong id="referralCode">LOADING...</strong></p>
      <input type="text" id="referralLink" readonly style="width:100%; padding:8px; margin: 8px 0; font-size:12px;">
      <button onclick="copyReferralLink()" style="font-size:12px; padding:8px;">Copy Referral Link</button>
      <button class="close-btn" onclick="closeReferral()">Close</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    // Initialize EmailJS
    emailjs.init("gTfW_0Iil11VUS0qE");

    let shiba = 208890;
    let adsWatched = 96;
    let referrals = 0;
    let rewardGiven = false;
    let currentAdTimer = null;

    // Ø³ÛŒØ³ØªÙ… ØªØ¨Ù„ÛŒØºØ§Øª AdMaven
    function showAd(adType, shibaReward) {
      const adModal = document.getElementById('adModal');
      const adMessage = document.getElementById('adMessage');
      const adProgressBar = document.getElementById('adProgressBar');
      const adTimer = document.getElementById('adTimer');
      
      // ØªÙ†Ø¸ÛŒÙ… Ù¾ÛŒØ§Ù… Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ ØªØ¨Ù„ÛŒØº
      const adMessages = {
        video: "ðŸŽ¬ Video Ad - Watch for 30 seconds",
        banner: "ðŸ“‹ Survey Ad - Complete the survey", 
        click: "ðŸ–±ï¸ Click Ad - Visit the website"
      };
      
      adMessage.textContent = adMessages[adType] || "Watch the ad to earn Shiba";
      adModal.style.display = "flex";
      
      // Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø± 30 Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ
      let timeLeft = 30;
      adProgressBar.style.width = '0%';
      
      if (currentAdTimer) clearInterval(currentAdTimer);
      
      currentAdTimer = setInterval(() => {
        timeLeft--;
        const progress = ((30 - timeLeft) / 30) * 100;
        adProgressBar.style.width = `${progress}%`;
        adTimer.textContent = `${timeLeft} seconds remaining`;
        
        if (timeLeft <= 0) {
          clearInterval(currentAdTimer);
          // Ø¯Ø§Ø¯Ù† Ù¾Ø§Ø¯Ø§Ø´ Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªÙ…Ø§Ù… ØªØ§ÛŒÙ…Ø±
          addShiba(shibaReward);
          showNotification(`âœ… Ad completed! You earned ${shibaReward} Shiba!`);
          closeAd();
          
          // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù„ÛŒÙ†Ú© ØªØ¨Ù„ÛŒØºØ§ØªÛŒ AdMaven
          window.open('https://www.admaven.com', '_blank');
        }
      }, 1000);
    }

    function closeAd() {
      if (currentAdTimer) {
        clearInterval(currentAdTimer);
        currentAdTimer = null;
      }
      document.getElementById('adModal').style.display = "none";
    }

    // Ø¨Ù‚ÛŒÙ‡ Ú©Ø¯Ù‡Ø§ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…Ø§Ù†Ù†Ø¯ Ù‚Ø¨Ù„
    // Ø³ÛŒØ³ØªÙ… Ø±ÙØ±Ø§Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡
    function setupReferralSystem() {
      let userRefCode = localStorage.getItem('user_ref_code');
      if (!userRefCode) {
        userRefCode = generateReferralCode();
        localStorage.setItem('user_ref_code', userRefCode);
      }

      if (window.Telegram && window.Telegram.WebApp) {
        const startParam = window.Telegram.WebApp.initDataUnsafe.start_param;
        if (startParam && startParam.startsWith('ref_')) {
          const referrerCode = startParam.replace('ref_', '');
          handleReferralJoin(referrerCode);
        }
      }

      return userRefCode;
    }

    function generateReferralCode() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < 8; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    function handleReferralJoin(referrerCode) {
      if (!localStorage.getItem('referral_claimed')) {
        shiba += 500;
        localStorage.setItem('referral_claimed', 'true');
        localStorage.setItem('referrer', referrerCode);
        
        showNotification("ðŸŽ‰ You received 500 Shiba for joining via referral!");
        updateDashboard();
        
        console.log(`New user joined via referral from: ${referrerCode}`);
        sendReferralNotification(referrerCode);
      }
    }

    function sendReferralNotification(referrerCode) {
      const templateParams = {
        from_name: "Shiba Earn Referral System",
        to_name: "Admin",
        message: `New Referral Success!
        
Referrer Code: ${referrerCode}
New User Joined via Referral
Date: ${new Date().toLocaleString()}

Referrer should receive 500 Shiba bonus!`
      };

      emailjs.send("gmail", "template_ui84joy", templateParams)
        .then(function(response) {
          console.log("Referral notification sent");
        })
        .catch(function(error) {
          console.error("Failed to send referral notification", error);
        });
    }

    function getReferralLink() {
      const userRefCode = localStorage.getItem('user_ref_code') || setupReferralSystem();
      return `https://t.me/Whichadtoearnbot?start=ref_${userRefCode}`;
    }

    function updateDashboard() {
      document.getElementById("shibaBalance").innerText = shiba.toLocaleString();
      document.getElementById("dashBalance").innerText = shiba.toLocaleString();
      document.getElementById("dashAds").innerText = adsWatched;
      document.getElementById("referralCount").innerText = referrals;
      document.getElementById("currentBalance").innerText = shiba.toLocaleString();
      document.getElementById("currentAds").innerText = adsWatched;
    }

    function showNotification(message, isSuccess = true) {
      const notification = document.getElementById("notification");
      notification.textContent = message;
      notification.style.display = "block";
      notification.style.backgroundColor = isSuccess ? "rgba(46, 204, 113, 0.9)" : "rgba(231, 76, 60, 0.9)";
      
      setTimeout(() => {
        notification.style.display = "none";
      }, 4000);
    }

    function addShiba(amount) {
      shiba += amount;
      adsWatched += 1;

      if (adsWatched === 1000 && !rewardGiven) {
        shiba += 50000;
        rewardGiven = true;
        showNotification("You earned a bonus of 50,000 Shiba!");
      } else {
        showNotification(`You earned ${amount} Shiba!`);
      }

      updateDashboard();
      
      const progress = Math.min((adsWatched / 10), 100);
      document.getElementById("progressBar").style.width = `${progress}%`;
      document.getElementById("progressText").textContent = `${adsWatched}/1000 ads watched`;
    }

    function withdraw() {
      const walletAddress = document.getElementById("walletInput").value.trim();
      const userEmail = document.getElementById("emailInput").value.trim();
      const withdrawButton = document.getElementById("withdrawButton");

      if (!walletAddress || !userEmail) {
        showNotification("Please enter both wallet address and email.", false);
        return;
      }

      if (!isValidEmail(userEmail)) {
        showNotification("Please enter a valid email address.", false);
        return;
      }

      if (shiba < 200000) {
        showNotification("You need at least 200,000 Shiba to withdraw.", false);
        return;
      }

      withdrawButton.textContent = "Processing...";
      withdrawButton.classList.add('loading');
      showNotification("Processing withdrawal request...", true);

      const templateParams = {
        from_name: "Shiba Earn App User",
        to_name: "Admin",
        user_email: userEmail,
        wallet_address: walletAddress,
        shiba_amount: shiba.toLocaleString(),
        referral_code: localStorage.getItem('user_ref_code') || 'N/A',
        message: `Withdrawal Request Details:
User Email: ${userEmail}
Wallet Address: ${walletAddress}
Shiba Amount: ${shiba.toLocaleString()}
Ads Watched: ${adsWatched}
Referral Code: ${localStorage.getItem('user_ref_code') || 'N/A'}
Date: ${new Date().toLocaleString()}`
      };

      emailjs.send("gmail", "template_ui84joy", templateParams)
        .then(function(response) {
          console.log("SUCCESS!", response);
          
          shiba = 0;
          adsWatched = 0;
          updateDashboard();
          document.getElementById("progressBar").style.width = '0%';
          document.getElementById("progressText").textContent = '0/1000 ads watched';
          document.getElementById("walletInput").value = "";
          document.getElementById("emailInput").value = "";
          
          showNotification("Withdrawal successful! Email sent to admin.");
          closeWallet();
        })
        .catch(function(error) {
          console.error("FAILED...", error);
          showNotification("Withdrawal failed: " + (error.text || "Please try again."), false);
        })
        .finally(function() {
          withdrawButton.textContent = "Withdraw (Min: 200,000 Shiba)";
          withdrawButton.classList.remove('loading');
        });
    }

    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    function openWallet() {
      document.getElementById("walletModal").style.display = "flex";
      updateDashboard();
    }

    function closeWallet() {
      document.getElementById("walletModal").style.display = "none";
    }

    function openDashboard() {
      document.getElementById("dashboardModal").style.display = "flex";
      updateDashboard();
    }

    function closeDashboard() {
      document.getElementById("dashboardModal").style.display = "none";
    }

    function openReferral() {
      const referralLink = getReferralLink();
      const userRefCode = localStorage.getItem('user_ref_code') || setupReferralSystem();
      
      document.getElementById("referralLink").value = referralLink;
      document.getElementById("referralCode").textContent = userRefCode;
      document.getElementById("referralModal").style.display = "flex";
    }

    function closeReferral() {
      document.getElementById("referralModal").style.display = "none";
    }

    function copyReferralLink() {
      const referralLink = document.getElementById("referralLink");
      referralLink.select();
      referralLink.setSelectionRange(0, 99999);
      
      try {
        navigator.clipboard.writeText(referralLink.value);
        showNotification("Referral link copied to clipboard!");
      } catch (err) {
        document.execCommand("copy");
        showNotification("Referral link copied to clipboard!");
      }
    }

    window.onload = function() {
      setupReferralSystem();
      updateDashboard();
      
      window.onclick = function(event) {
        const walletModal = document.getElementById("walletModal");
        const dashboardModal = document.getElementById("dashboardModal");
        const referralModal = document.getElementById("referralModal");
        const adModal = document.getElementById("adModal");
        
        if (event.target === walletModal) closeWallet();
        if (event.target === dashboardModal) closeDashboard();
        if (event.target === referralModal) closeReferral();
        if (event.target === adModal) closeAd();
      }
    }
  </script>
</body>
</html>